CourseCtrl = ($scope, ModalFactory, course)->
  $scope.course = course

  initializeEditCourseModal = =>
    $scope.editCourseModal = new ModalFactory
      templateUrl: '<%= asset_path('app/courses/course-edit.html') %>'
      contentScope:
        course: angular.copy($scope.course)
        close: =>
          $scope.editCourseModal.deactivate()

  initializeEditCourseModal()
  $scope.openEditCourseForm = ->
    $scope.editCourseModal.activate()

  $scope.openNotification = ->
    $modal.open
      templateUrl: '<%= asset_path('app/courses/notify/notify-members') %>'
      controller: 'NotificationCtrl as vm'
      windowClass: 'send__notification full'
      resolve: { course: -> $scope.course }

CourseCtrl.$inject = [
  '$scope',
  'ModalFactory',
  'course'
]

angular
  .module('app.courses')
  .controller('CourseCtrl', CourseCtrl)
