Router = ($stateProvider,
          $urlRouterProvider,
          CoursesResolver,
          CourseResolver,
          CourseRegistrationResolver,
          EventsPaginationResolver,
          EventResolver,
          MediasResolver) ->
  $urlRouterProvider.otherwise('/courses')
  $stateProvider
    .state('courses',
      url: '/courses'
      controller: 'CoursesIndexCtrl as vm'
      templateUrl: '<%= asset_path('app/courses/courses') %>'
      resolve: 
        courses: CoursesResolver
        $title: ['$translate', ($translate) -> $translate('courses.title.courses')]

    )
    .state('courses.inactive',
      url: '/inactive'
      templateUrl: '<%= asset_path('app/courses/courses-inactive') %>'
    )
    .state('courses.search',
      url: '/search'
      controller: 'CourseSearchCtrl'
      templateUrl: '<%= asset_path('app/join/course-join') %>'
    )
    .state('courses.confirm_registration',
      url: '/:id/confirm_registration'
      controller: 'CourseConfirmRegistrationCtrl'
      templateUrl: '<%= asset_path('app/join/course-confirm') %>'
      resolve: { course: CourseRegistrationResolver }
    )
    .state('courses.show',
      url: '/:courseId'
      abstract: true
      controller: 'CourseCtrl'
      templateUrl: '<%= asset_path('app/courses/course-detail') %>'
      resolve:
        course: CourseResolver
        $title: ['$translate', 'course', ($translate, course) -> $translate('courses.title.course-detail', course: course)]
    )
    .state('courses.show.calendar',
      url: '/calendar?month'
      controller: 'CalendarCtrl'
      templateUrl: '<%= asset_path('app/courses/calendar/calendar') %>'
    )
    .state('courses.show.events',
      url: '/events?until'
      controller: 'CourseEventsCtrl'
      templateUrl: '<%= asset_path('app/courses/events/events') %>'
      resolve:
        pagination: EventsPaginationResolver
    )
    .state('courses.show.calendar.schedule',
      url: '/schedule'
      controller: 'ScheduleCtrl'
      templateUrl: '<%= asset_path('app/courses/schedule/schedule') %>'
    )
    .state('courses.show.members',
      url: '/members'
      controller: 'CourseMembersCtrl as vm'
      templateUrl: '<%= asset_path('app/courses/members/members') %>'
    )
    .state('courses.show.event',
      url: '/events/:startAt'
      views:
          '@':
            templateUrl: '<%= asset_path('app/lesson-plan/lesson-plan-edit') %>'
            controller: 'EventCtrl'
      resolve: { event: EventResolver }
    )
    .state('events.show',
      url: '/:startAt?courseId'
      controller: 'EventCtrl'
      templateUrl: '<%= asset_path('app/lesson-plan/lesson-plan-edit') %>'
      resolve: { event: EventResolver }
    )
    .state('medias',
      url: '/catalog'
      controller: 'MediasIndexCtrl'
      templateUrl: '<%= asset_path('app/catalog/catalog') %>'
      resolve: { searchResult: MediasResolver }
    )
    .state('profile',
      url: '/profile/edit'
      controller: 'ProfileCtrl'
      templateUrl: '<%= asset_path('app/profile/profile') %>'
      resolve:
        $title: ['$translate', ($translate) -> $translate('profile.title.edit')]
    )
    .state('profile.change_password',
      url: '/profile/password/edit'
      controller: 'PasswordCtrl'
      templateUrl: '<%= asset_path('app/profile/password') %>'
    )

Router.$inject = [
  '$stateProvider',
  '$urlRouterProvider',
  'CoursesResolver',
  'CourseResolver',
  'CourseRegistrationResolver',
  'EventsPaginationResolver',
  'EventResolver',
  'MediasResolver']

angular
  .module('app')
  .config(Router)
