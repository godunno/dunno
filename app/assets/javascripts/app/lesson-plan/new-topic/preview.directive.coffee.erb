app.lessonPlan = angular.module('app.lessonPlan')

previewCtrl = ['$scope', ($scope)->
  $scope.removeMedia = ->
    if confirm("Deseja remover este anexo? Essa operação não poderá ser desfeita.")
      $scope.$emit('removeMedia')
]

preview = ->
  restrict: 'E'
  # TODO: Find a way to keep the two-way data binding without the isolated scope
  scope:
    item: '='
    removable: '='
  controller: 'previewCtrl'
  templateUrl: '<%= asset_path('app/components/preview') %>'

app.lessonPlan.controller 'previewCtrl', previewCtrl
app.lessonPlan.directive 'preview', preview
