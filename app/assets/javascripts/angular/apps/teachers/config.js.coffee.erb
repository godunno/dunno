#= depend_on_asset "teacher/courses/index.html"
#= depend_on_asset "teacher/courses/form.html"
#= depend_on_asset "teacher/courses/show.html"
#= depend_on_asset "teacher/events/index.html"
#= depend_on_asset "teacher/events/form.html"
#= depend_on_asset "teacher/medias/index.html"
#= depend_on_asset "styleguide.html"

DunnoApp = angular.module 'DunnoApp', ['ngRoute', 'ngResource', 'rails', 'ui.keypress', 'ui.sortable', 'angularFileUpload', 'ngSanitize', 'ngTagsInput']

Router = ($routeProvider)->
  $routeProvider.
    when('/courses',          controller: 'CoursesIndexCtrl', templateUrl: '<%= asset_path('teacher/courses/index.html') %>').
    when('/courses/new',      controller: 'CourseCtrl',       templateUrl: '<%= asset_path('teacher/courses/form.html') %>').
    when('/courses/:id/edit', controller: 'CourseCtrl',       templateUrl: '<%= asset_path('teacher/courses/form.html') %>').
    when('/courses/:id',      controller: 'CourseCtrl',       templateUrl: '<%= asset_path('teacher/courses/show.html') %>').
    when('/events',           controller: 'EventsIndexCtrl',  templateUrl: '<%= asset_path('teacher/events/index.html') %>').
    when('/events/new',       controller: 'EventCtrl',        templateUrl: '<%= asset_path('teacher/events/form.html') %>').
    when('/events/:id/edit',  controller: 'EventCtrl',        templateUrl: '<%= asset_path('teacher/events/form.html') %>').
    when('/catalog',          controller: 'MediasIndexCtrl',  templateUrl: '<%= asset_path('teacher/medias/index.html') %>').
    when('/styleguide', templateUrl: '<%= asset_path('styleguide.html') %>').
    otherwise(redirectTo: '/courses')
Router.$inject = ['$routeProvider', '$locationProvider']
DunnoApp.config Router

DunnoApp.config(["railsSerializerProvider", "tagsInputConfigProvider", (railsSerializerProvider, tagsInputConfigProvider)->
  railsSerializerProvider.underscore(angular.identity).camelize(angular.identity)
  tagsInputConfigProvider.setTextAutosizeThreshold(30)
])

DunnoApp.constant('AUTOSAVE_INTERVAL', 5000)
