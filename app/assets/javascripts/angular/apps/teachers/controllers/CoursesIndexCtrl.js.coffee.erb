DunnoApp = angular.module('DunnoApp')

CoursesIndexCtrl = ($scope, $routeParams, SessionManager, AssetsPreloader, courses)->
  $scope.courses = courses

  if !SessionManager.currentUser().completed_tutorial
    <% tutorials = {1 => [1], 2 => [1,2], 3 => [1,2,3]} %>
    <% tutorials.each do |tutorial, steps| %>
      <% steps.each do |step| %>
        <% image = "tutorial/tutorial-arrow-#{tutorial}-#{step}.png" %>
        <%= "AssetsPreloader.loadImage(\"#{asset_path(image)}\")" %>
      <% end %>
    <% end %>
    AssetsPreloader.loadFont('Chalkduster')
CoursesIndexCtrl.$inject = ['$scope', '$routeParams', 'SessionManager', 'AssetsPreloader', 'courses']
DunnoApp.controller 'CoursesIndexCtrl', CoursesIndexCtrl
