DunnoApp = angular.module('DunnoApp')

DunnoApp.controller 'previewCtrl', ['$scope', ($scope)->
  $scope.imageSrc = (src)-> src || "//:0"

  $scope.removeMedia = ->
    if confirm("Deseja remover este anexo? Essa operação não poderá ser desfeita.")
      $scope.$parent.removeMedia(arguments...)
]

DunnoApp.directive 'preview', ->
  restrict: 'E'
  # TODO: Find a way to keep the two-way data binding without the isolated scope
  scope:
    item: '='
  controller: 'previewCtrl'
  templateUrl: '<%= asset_path('teacher/events/_preview.html') %>'
